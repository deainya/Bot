'use strict'; //ECMAScript standard

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—ã
const TelegramBot = require('telegraf'); // telegraf library
let Config        = require('./config'); // get config

// –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–æ—Ç–∞ —Ç–µ–ª–µ–≥—Ä–∞–º–º
let app           = new TelegramBot(Config.bot_token);

/*app.getMe((res) => {
  console.log(res);
});
 */

/* –ù–∞—à –±–æ—Ç –±—É–¥–µ—Ç —É–º–µ—Ç—å —Å–∫–∞–∑–∞—Ç—å –µ—Å—Ç—å –ª–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –∫–Ω–∏–≥–∞ –≤ —à–∫–æ–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
 * –ï—â—ë –æ–Ω —Å–º–æ–∂–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤ –Ω–∞ –¥–µ–Ω—å
 * –ò —á–µ–º –≤–∫—É—Å–Ω—ã–º —Å–µ–≥–æ–¥–Ω—è —É–≥–æ—â–∞—é—Ç –≤ —Å—Ç–æ–ª–æ–≤–æ–π (–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ...)
 */

// –û–±—ä—è–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
var a = 1;
var b = 2;
var schedule = { monday :[{time:'10:00', subject:'–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞'},{time:'10:50', subject:'–ú—É–∑—ã–∫–∞'}],
                 tuesday:[]
                 //...—Ç—É—Ç –Ω–∞–ø–∏—à–µ—Ç –ê–ª–∏—Å–∞
               };

// –ó–∞–¥–∞—ë–º —Ä–µ–∞–∫—Ü–∏—é –±–æ—Ç–∞ –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
app.command('start', (ctx) => {
  console.log('start', ctx.from);
  ctx.reply('–î–∞, –¥–∞–≤–∞–π –Ω–∞—á–Ω—ë–º...');
  ctx.reply('–ú–µ–Ω—è –∑–æ–≤—É—Ç c3po');
});
app.command('help', (ctx) => {
  console.log('help', ctx.from);
  ctx.reply('–ü–æ–º–æ–≥–∏ —Å–µ–±–µ —Å–∞–º, –±—É–¥—å —É–º–Ω–∏—á–∫–æ–π!');
});

// –ó–∞–¥–∞—ë–º —Ä–µ–∞–∫—Ü–∏—é –±–æ—Ç–∞ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
app.hears('–ü—Ä–∏–≤–µ—Ç', (ctx) => ctx.reply('–ü—Ä–∏–≤–µ—Ç :)'));
app.hears('1+2?', (ctx) => ctx.reply(a+b));

// ... —Ä–∞–±–æ—Ç–∞–µ–º —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º...
app.hears('–ö–∞–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫?', (ctx) => {
  ctx.reply('–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫:');
  ctx.reply(schedule.monday); //–æ–π, –Ω–µ —Å–æ–≤—Å–µ–º —Ç–æ, —á—Ç–æ —Ö–æ—Ç–µ–ª–∏...

  ctx.reply('–ü–µ—Ä–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫:');
  ctx.reply(schedule.monday[0].time + ' ' + schedule.monday[0].subject);

});

// ...—Ç—É—Ç –Ω–∞–ø–∏—à–µ—Ç –ê–ª–∏—Å–∞
app.on('sticker', (ctx) => ctx.reply('üëç'));
app.on('photo', (ctx) => ctx.reply('üëç like :)'));

// –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–æ—Ç–∞
app.startPolling();

// –ù–∏–∂–µ –ø—Ä–∏–º–µ—Ä—ã –æ–±—ä–µ–∫—Ç–æ–≤
/* –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: ['book':{'name':'–ö–∞–ø–∏—Ç–∞–Ω—Å–∫–∞—è –¥–æ—á–∫–∞', 'author':'–ü—É—à–∫–∏–Ω –ê. –°.', 'amount':5}, 'student':{'name':'', 'till':''}]
 * –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ: {'–ü–Ω':[{'time':'10:00', 'subject':'–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞'}, {'time':'10:45', 'subject':'–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞'}, ...]}
 * –°—Ç–æ–ª–æ–≤–∞—è: –º–µ–Ω—é, –∫–æ–ª-–≤–æ —É—á–µ–Ω–∏–∫–æ–≤
 * –ü–µ—Ä–µ–≤–æ–¥?
 */
